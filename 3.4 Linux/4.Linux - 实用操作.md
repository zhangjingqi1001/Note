# Linux - 实用操作

[TOC]

# 一、快捷键集合

1. **强制停止快捷键：ctrl+c**

强制停止某些运行的程序

或者命令输入错误，也可以通过快捷键ctrl+c退出当前输入，重新输入，如下所示

![image-20240531105917988](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531105917988.png)

2. **退出账户的登录/退出程序专属页面：ctrl+d**

使用下面的命令登入到root管理员账号后，ctrl+d就可以退出root账户，回到之前的账户

```sh
su - root
```

**还可以退出某些特定程序的专属页面**，如下是输入了“python”，之后点击了"ctrl+d"，便退出了python编程环境

> 不能用于退出vi/vim

![image-20240531111151690](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531111151690.png)



3. **查看历史输入过的指令：history**

```sh
history 
```

![image-20240531111757146](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531111757146.png)

还可以通过某些关键字过滤某些特定的指令

```sh
history | grep xxx
```

如，执行过哪些“ch”开头的指令

```sh
history | grep ch
```

![image-20240531112045814](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531112045814.png)

这个地方还有一个执行命令的快捷方式，比如下面，通过感叹号作为前缀，在后面写上对应的字符，他就会在历史命令里面从下向上搜索

> 但是对于要执行很久之前的历史命令，不建议使用这种命令，很容易造成执行错误的命令

```sh
!t
```

其实执行的是69行的这个命令

![image-20240531112521931](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531112521931.png)



4. **历史命令搜索：ctrl+r**

输入内容去匹配历史命令

比如下面输入进入搜索模式后，搜索"his"，右侧就自动冒出"history"

![image-20240531135615565](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531135615565.png)

假日搜索到的内容是我们需要的，那么

* 回车键可以直接执行
* 键盘左右键，可以得到次命令（不会执行命令）





5. **光标移动快捷键**

* **ctrl+a，跳到命令开头**
* **ctrl+e，跳到命令结尾**
* **ctrl+键盘左键，向左跳一个单词**
* **ctrl+键盘右键，向右跳一个单词**



6. **清空终端内容，ctrl+l或者通过命令clear得到同样的效果**



# 二、安装软件

* **下载安装包自行安装**

  比如Windows系统使用exe文件、mis文件等

  Mac系统使用dmg文件、pkg文件等



* **系统的应用商店内安装**

  如win系统内的Microsoft Store商店

  Mac系统有App Store商店



Linux系统同样支持这两种方式，yum命令安装软件就是Linux命令行内的应用商店



## 2.1 yum

> 使用yum在CentOS系统安装软件
>
> Linux软件安装包的格式是rpm，也可以使用rpm命令进行安装，但下面的安葬更高效更高级

RPM包软件管理器，用于自动化安装配置Linux软件，并可以自动解决依赖的问题

**语法**

```sh
yum [-y] [install | remove | search] 软件名称
```

* **-y选项，自动确认，无需手动确认安装或卸载的过程**

* **install：安装**
* **remove：卸载**
* **search：搜索**

> yum命令需要root权限，可以使用su切换到root，或使用sudo提权
>
> yum命令需要联网



**示例**

> 一定要有管理员权限和联网
>
> **怎么查看虚拟机中的Linux是否联网呢**？
>
> 执行 ping www.baidu.com 命令，如果执行成功则表示联网成功
>
> 如果联网不成功的话，可以参考这个文章[虚拟机中的Linux连接网络失败](https://blog.csdn.net/xtaypyvi123456/article/details/132355416)

* **安装wget程序**

```sh
yum -y install wget
```

![image-20240531151737284](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531151737284.png)

* **卸载wget命令**

```sh
yum -y remove wget
```

![image-20240531151915188](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531151915188.png)

* **搜索是否有wget安装包**

```sh
yum  search wget
```



## 2.2 apt

> 软件的安装包是deb的文件

使用apt为Ubuntu安装软件

CentOS系统和Ubuntu是使用不同的包管理器

CentOS使用yum管理器，Ubuntu使用apt管理器

**语法**

```sh
apt [-y] [install | remove | search] 软件名称
```

> 用法和yum一致，同样需要root权限

* **安装wget**

```sh
apt install wget
```



* **移除wget**

```sh
apt remove wget
```



* **搜索wget**

```sh
apt search wget
```



# 三、systemctl 命令

**Linux系统很多软件（内置或第三方）均支持systemctl命令控制：启动、停止、开机自启**

能够被systemctl管理的软件，一般称之为服务

**语法**

```sh
systemctl start | stop | status | enable | disable 服务名
```

* start 启动
* stop 关闭
* status 查看状态
* enable 开启开机自启
* disable 关闭开机自启



**系统内置的服务比较多**

* NetworkManager，主网络服务
* network，副网络服务
* firewalld，防火墙服务
* sshd，ssh服务（FinalShell远程登录Linux使用的就是这个服务）



**示例**

* **查看防火墙状态**

```sh
systemctl status firewalld 
```

运行的挺好的

![image-20240531160146723](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531160146723.png)



**除了内置的服务外，部分第三方软件安装后也可以以systemctl进行控制**

> 只要安装的软件内置有去注册服务的功能，我们就能通过systemctl命令去控制它的启动和关闭了

* **安装ntp软件**

  这是一个时间同步的软件

```sh
yum install -y ntp
```

可以通过ntpd服务名（安装的时候自动注册上服务的），配合systemctl进行控制，如下所示，发现ntp关闭着

> 软件名叫ntp，注册的服务名叫ntpd

![image-20240531161407607](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531161407607.png)



* **安装apache服务器软件**

  可以通过httpd服务名，配合systemctl进行控制

```sh
yum install -y httpd
```



> 若部分软件安装后没有自动集成到systemctl中，我们可以手动添加，会在后面介绍



# 四、软连接 ln

**使用ln命令创建软连接**

在系统中创建软连接，可以将文件、文件夹链接到其他位置

> 类似Windows系统中的快捷方式

**语法**

```sh
ln -s 参数1 参数2
```

* -s选项，创建软连接
* 参数1，被链接的文件或文件夹
* 参数2，要链接去的目的地



**示例**

* **链接文件**

将/etc/yum.conf文件连接到自己的home目录内

/yum.conf文件是虚拟的文件，本体指向/etc/yum.conf

```sh
ln -s /etc/yum.conf~/yum.conf
```

> 假如说我们cat一下软链接的时候，我们其实看到的是链接到的本体的内容

* **链接文件夹**

```sh
ln -s /etc/yum~/yum
```





# 五、日期与时区

## 5.1 查看日期与时间 date

通过date命令可以在命令行中查看系统的时间

**语法**

```sh
date [-d] [+格式化字符串]
```

* **-d选项，按照给定的字符串显示日期，一般用于日期计算**
  * year 年
  * month 月
  * day 天
  * hour 小时
  * minute 分钟
  * second 秒

![image-20240531172700947](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531172700947.png)

* **"格式化字符串"，通过特定的字符串标记，来控制显示的日期格式**
  * %Y 年
  * %y 年份后两位数字（00 .. 99）
  * %m 月份（01 .. 12）
  * %d 日（01 .. 31）
  * %H 小时 （00 .. 23）
  * %M 分钟（00 .. 59）
  * %S 秒（00 ... 60）
  * %s 自1970-01-01 00:00:00 UTC 到现在的秒数

**示例**

* **使用date命令本体，无选项，直接查看时间**

```sh
date
```

![image-20240531172056689](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531172056689.png)



* **按照2022-01-01格式显示时间**

```sh
date +%Y-%m-%d
```

![image-20240531172152405](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531172152405.png)



* **按照2022-01-01 10:00:00的格式显示日期**

  如果中间有空格的话，需要用双引号括起来

```sh
date "+%Y-%m-%d %H:%M:%S"
```

![image-20240531172346666](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531172346666.png)





## 5.2 修改Linux系统时区

我们通过date查看的日期时间是不准确的，因为系统默认时区并不是东八区

**使用root权限，执行如下命令，修改时区为东八区**

下面的命令是将系统自带的localtime文件删除，并将/usr/share/zoneinfo/Asia/Shanghai 文件链接为localtime文件即可

```sh
rm -f /etc/localtime
sudu ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

执行完成后，发现右上角的时间正确了

![image-20240531173327417](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531173327417.png)



## 5.3 时间同步和校准 ntp

我们可以通过ntp程序自动校准系统时间

首先安装ntp程序

```sh
yum -y install ntp
```

启动并设置开机自启

```sh
systemctl start ntpd
systemctl enable ntpd
```

![image-20240531173621210](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240531173621210.png)

当ntpd启动后会定期的帮助我们联网校准系统的时间

我们当然也可以手动校准（需root权限）

```sh
ntpdate -u ntp.aliyun.com
```

通过阿里云提供的服务网址配合ntpdate（安装ntp后会附带这个命令）命令自动校准



