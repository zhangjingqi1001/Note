# 反序列化JSON数据

在反序列化JSON数据时，怎么将 JSON 对象中的某个属性映射到 Java 类中的某个字段上

# 问题描述

我们要将JSON数据转换成实体类对象，下面我们就能看出来，JSON中的字段和实体类中的不一致，怎么办呢？

**JSON数据**

```json
{
            "Row":[
                {
                    "MzZyBz":"IP",
                    "TranDate":"2024-01-09 00:21:28",
                    "OperUser":"zywxyy",
                    "TranNo":"T00003543462202401090012000995",
                    "InvoiceNo":"20240109002128TSZX4927",
                    "PayType":"GDYHYJF",
                    "PatName":"刘伟芝",
                    "PatientNo":"0000546081",
                    "OrderType":"C",
                    "MerNo":"唐山中心医院",
                    "OrderAmount":1000,
                    "OrderState":"支付成功"
                },
                {
                    "MzZyBz":"IP",
                    "TranDate":"2024-01-09 00:21:28",
                    "OperUser":"zywxyy",
                    "TranNo":"T00003543462202401090012000995",
                    "InvoiceNo":"20240109002128TSZX4927",
                    "PayType":"GDYHYJF",
                    "PatName":"刘伟芝",
                    "PatientNo":"0000546081",
                    "OrderType":"C",
                    "MerNo":"唐山中心医院",
                    "OrderAmount":1000,
                    "OrderState":"支付成功"
                }
            ]
        }
```



**实体类**

```java
public class TSHisBill implements Serializable {
    private static final long serialVersionUID = 1L;

    private String billId;

    private String tranNo;

    private String invoiceNo;

    private String merNo;

    private String mzZyBz;

    private String payType;

    private BigDecimal orderAmount;

    private String orderType;

    private String tranDate;

    private String operUser;

    private String orderState;

    private String patientNo;

    private String patName;

    private String tenantCode;

}
```

# 一、jackson 解决方式

> [关于JSON字符串中的字段名与Java类中的字段名不匹配的解决方法（@JsonProperty(““) 与@JSONField(name = ““)的使用 ）](https://blog.csdn.net/ZhShH0413/article/details/134348254?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170618428216800185885404%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=170618428216800185885404&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-134348254-null-null.142^v99^pc_search_result_base3&utm_term=%E4%BD%BF%E7%94%A8hutool%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9C%A8%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96JSON%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E6%80%8E%E4%B9%88%E5%B0%86%20JSON%20%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7%E6%98%A0%E5%B0%84%E5%88%B0%20Java%20%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5%E4%B8%8A&spm=1018.2226.3001.4187)

**使用@JsonProperty注解修饰实体类中不对应的字段**

> 使用jackson中的@JSONField字段一样的效果，可以试一试

```java
public class TSHisBill  implements Serializable {
    private static final long serialVersionUID = 1L;

    private String billId;

    @JsonProperty("TranNo")
    private String tranNo;

    @JsonProperty("InvoiceNo")
    private String invoiceNo;

    @JsonProperty("MerNo")
    private String merNo;

    @JsonProperty("MzZyBz")
    private String mzZyBz;

    @JsonProperty("PayType")
    private String payType;

    @JsonProperty("OrderAmount")
    private BigDecimal orderAmount;

    @JsonProperty("OrderType")
    private String orderType;

    @JsonProperty("TranDate")
    private String tranDate;

    @JsonProperty("OperUser")
    private String operUser;

    @JsonProperty("OrderState")
    private String orderState;

    @JsonProperty("PatientNo")
    private String patientNo;

    @JsonProperty("PatName")
    private String patName;

    private String tenantCode;

}
```

**使用Jackson中的objectMapper.readValue方法即可完成**

```java
        JSONArray jsonArray = hisBillResponse.getJSONObject("Response").getJSONObject("Rows").getJSONArray("Row");
        for (Object bill : jsonArray) {
//            System.out.println(bill);
            ObjectMapper objectMapper = new ObjectMapper();
            TSHisBill userBo1 = objectMapper.readValue(bill.toString(), TSHisBill.class);
            System.out.println(userBo1);

        }
```



# 二、FastJSON解决方式

下面这个文章，参考第六节即可

[FastJson——JSO字符串与对象的相互转化](https://blog.csdn.net/weixin_51351637/article/details/129938874?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22129938874%22%2C%22source%22%3A%22weixin_51351637%22%7D)



# 三、hutool 工具类解决

暂时不会