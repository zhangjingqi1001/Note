[TOC]



# 一、初始化脚手架

## 1.1 说明

**Vue脚手架是Vue官方提供的标准化开发工具**

> 官网地址：[Vue.js官网](https://cn.vuejs.org/)
>
> 脚手架官网地址：[Vue脚手架官网地址](https://cli.vuejs.org/zh/)
>
> 英文名叫： Vue CLI ，Vue command line interface,命令行接口工具

Vue脚手架最新版本是4.x，Vue框架最新版本是3

> 一般脚手架版本选择最新的即可，因为会向下兼容
>
> 但是不要选择一个很新的Vue脚手架搭配一个Vue框架

在这里我们使用Vue脚手架5，Vue框架3

## 1.2 安装

1. **全局安装@vue/cli**

   仅第一次的时候执行次命令，全局安装完以后不会再俺咋混个

```sh
npm install -g @vue/cli
```



2. **切换到你要创建项目的目录，执行命令创建项目**

```sh
vue create xxx
```

之后会让我们选择Vue版本，我们选择Vue 2 。

也可以看到Vue CLI版本是 5.0.8

babel是ES6转ES5的语法，eslint是做语法检查的

![](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231114110049253.png)

然后会让我们选择使用Yarn还是选择NPM，我们选择NPM，之后等待即可

![image-20231114110341161](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231114110341161.png)

> 如果创建过程中卡住了，回车试试
>
> 如果超过十来分钟没有反应，就配置一下淘宝镜像

**出现如下所示界面，表示创建成功**

![image-20231114111306136](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231114111306136.png)

3. **启动项目**

```sh
npm run serve
```

出现下图的情况表示启动成功

![image-20231114111440298](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231114111440298.png)

访问一下页面

![image-20231114111501320](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231114111501320.png)

**备注**

1. **出现下载缓慢请配置npm淘宝镜像**

```sh
npm config set registry https://registry.npm.taobao.org
```

2. **Vue脚手架隐藏了所有webpack相关的配置，若想查看具体的webpack配置，请执行**

```sh
vue inspect > output.js
```

3. **Ctrl+C退出运行程序**

# 二、脚手架

## 2.1 脚手架结构

* **node_modules**：项目依赖的js包

* **public**

  * **favicon.ico**：页签图标
  * **index.html**：主页面

* **src**：项目根目录

  * **assets**：存放静态资源

    * logo.png 照片文件

  * **component**：存放组件。除了App.vue之外的组件都在这里存放

    * HelloWord.vue

  * **App.vue**：汇总所有组件

  * **main.js**：入口文件。当执行完npm run serve命令后会直接执行此文件

    入口文件。当执行完npm run serve命令后会直接执行此文件

    ```javascript
    //该文件是整个项目的入口文件
    
    //引入Vue框架
    import Vue from 'vue'
    //引入App组件，是所有组件的父组件
    import App from './App.vue'
    
    //关闭生产提示
    Vue.config.productionTip = false
    
    //创建Vue实例对象 vm
    new Vue({
      //下面这段代码是将App组件放入容器中  
      render: h => h(App),
    }).$mount('#app')
    ```

    > $mount函数的使用可以查看下面这篇文章中的"el与data的两种写法"
    >
    > [2.Vue — 模板语法、数据绑定、el与data的写法、数据代理-CSDN博客](https://blog.csdn.net/weixin_51351637/article/details/134095462)

    

    > render: h => h(App)这行代码的解释在后面

    

* **.gitignore**：

  git版本控制忽略的配置哪些文件不想接收git的管理在这里面配置即可

* **babel.config.js**：

  babel的配置文件。挺重要的，但是不需要我们向里面写什么东西

  因为我们ES6转ES5需要借助babel。我们在这个配置文件中需要写出采用什么样的标准进行转换

* **package.json**：应用包配置文件

* **README.md**：应用描述文件

* **package-lock.json**：包版本控制文件

* **vue.config.js**：vue配置文件，用于设置代理，打包配置等





### 2.1.1 完善单组件代码



1. **执行了 npm run serve代码后，就会执行main.js文件，引入了Vue框架和App组件**
2. **之后发现App组件中引入了School组件和Student组件，于是乎把他们两个的代码也执行了，并且执行结果都汇总到了App组件当中，因为App组件是所有组件的父组件**
3. **之后又回到main.js组件，创建Vue实例，并且使用 render: h => h(App)将App组件放入容器**
4. **之后找到了index.html，放入到id=app的div中**



* **main.js**

```javascript
//该文件是整个项目的入口文件

//引入Vue框架
import Vue from 'vue'
//引入App组件，是所有组件的父组件
import App from './App.vue'

//关闭生产提示
Vue.config.productionTip = false

//创建Vue实例对象 vm
new Vue({
  //下面这段代码是将App组件放入容器中  
  render: h => h(App),
}).$mount('#app')
```



* **App.vue**

```javascript
<template>
  <div>
    <School></School>
    <Student></Student>
  </div>
</template>

<script>
//引入组件
import School from "./components/School.vue";
import Student from "./components/Student.vue";

export default {
  name: "App",

  components: {
    School,
    Student,
  }
};
</script>

<style>
</style>
```



* **Student.vue**

```javascript
<!-- 此标签不会参与标签的编译 -->
<template>
    <div >
      <h2>学生姓名：{{ studentName }}</h2>
      <h2>学生年龄：{{ age }}</h2>
    </div>
  </template>
  
  
  <script>
  export default {
    //组件名
    name: "Student",
  
    data() {
      return {
        studentName: "张三",
        age: 18,
      };
    },
  
  }
  </script>
  
  <style ></style>
```



* **School.vue**

```javascript
<!-- 此标签不会参与标签的编译 -->
<template>
    <div class="demo">
      <h2>学校名称：{{ schoolName }}</h2>
      <h2>学校地址：{{ address }}</h2>
      <button @click="showName">点我提示学校名称</button>
    </div>
  </template>
  
  
  <script>
  //ES6中模块化暴露（默认暴露）
  //创建组件Vue.extent是可以省略的，直接暴露组件的配置对象即可
  export default {
    //组件名
    name: "School",
  
    data() {
      return {
        schoolName: "qiludongyedaxue",
        address: "济南",
      };
    },
  
    methods: {
      showName() {
        alert(this.schoolName);
      },
    }
    
  }
  </script>
  
  <style >
  .demo {
    background: orange;
  }
  </style>
```



* **index.html**

```html
<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">

    <!--针对IE浏览器的一个特殊配置，让IE浏览器以最高的渲染级别渲染页面-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--开启移动端的理想视口-->
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--图标。BASE_URL指的是public所在的位置,所以直接在BASE_URL文件夹里找图标即可-->
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">

    <title>
        <!--配置网页标题-->
        <!--下面这一串代码的意思就是去package.json文件夹中找到"name": "vue_test",并将vue_test作为网站标题-->
        <%= htmlWebpackPlugin.options.title %>
    </title>
</head>

<body>

    <!--容器 -->
    <div id="app">
        <!-- 容器里面的模板 -->
        <App></App>
    </div>

</body>

</html>
```



* **效果图**

![image-20231115152044994](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115152044994.png)



## 2.2  render 配置项

![image-20231115152247149](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115152247149.png)



```javascript
import Vue from 'vue'
import App from './App.vue'

Vue.config.productionTip = false

new Vue({
  render: h => h(App),
}).$mount('#app')
```



### 2.2.1 写法分析

如果我们使用下面这个写法，控制台就会报错

```javascript
import Vue from 'vue'
import App from './App.vue'

//关闭开发环境时的生产提示
Vue.config.productionTip = false

new Vue({
    el:'#app',
    template:`<App></App>`
    components:{
        App
    }
})
```

**提示我们：正在使用一个运行时版本的Vue，没有模板解析器**

> 也就是我们引入了一个残缺版的Vue，没有模板解析器

![image-20231115160200987](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115160200987.png)

**但是后面的那句话也给我们解决此问题的方案，任选其一**：

1. 将要解析的模板交给 render函数

```javascript
new Vue({
  render: h => h(App),
}).$mount('#app')
```

2. 引入一个带有模板解析器的Vue（完整版Vue）

```javascript
import Vue from 'vue/dist/vue.js'
```





**残缺版本Vue怎么来的**？

我们使用下面代码引入的Vue其实就是粉色框中的vue.runtime.esm.js，这是一个残缺版本的Vue（或者说是精简版的Vue），缺少了模板解析器

缺少解析器后template这个选项就没有人可以解析

```javascript
import Vue from 'vue'
```

![image-20231115161256889](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115161256889.png)

下面红色框中的vue.js才是最原汁原味的vue，剩下的vue....js都是在这个版本上进行改变的

![image-20231115161550989](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115161550989.png)

**为什么会有残缺版Vue**？

Vue里面包含Vue核心（声明周期、处理事件）、模板解析器(解析模板template中的内容)

模板解析器解析器的体积太大，当开发完后交给webpack进行打包，就会生成一个非常大的文件夹

webpack是可以将vue文件解析成js文件的，并且这个阶段该解析的都已经解析完成了，此时模板解析器就没有什么作用了

**目的就是打包之后省一部分空间，打包后的文件小一点点**

### 2.2.2 解析 render 函数

**引入的是残缺版的Vue但是还想解析template选项，就可以借助render**

> vue文件中template标签的解析是靠的下面这个库
>
> ![image-20231115164500654](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115164500654.png)

render是一个函数，并且是Vue帮忙调用的，如下随时

```javascript
new Vue({
  //有个参数createElement，类型是函数，可以借助他渲染具体内容
  render(createElement){
      console.log('render')
      //render 需要有返回值
      //参数1：元素名
      //参数2：内容
      return  createElement('h1','你好');
  },
     //上面的render就可以代替下面的template
    //template : `<h1>你好啊</h1>`
})
```

控制台显示

![image-20231115162218892](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115162218892.png)

页面显示

![image-20231115162643602](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115162643602.png)

**上面的代码可以简写**

```javascript
new Vue({
    //h1是Html中内置元素
  render: h => h('h1','你好');
})
```

假如说我们使用的组件的话，就可以如下所示

```javascript
new Vue({
  // 具体解析的内容都在App组件里面配置着  
  render: h => h(App),
})
```

### 2.2.3  总结

**vue.js与vue.runtime.xxx.js的区别**：

*  vue.js是完整版的Vue，包含：核心功能+模板解析器

* vue.runtime.xxx.js是运行版的Vue,只包含：核心功能，没有解析器

**vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用render函数接收到createElement函数去指定具体内容**



## 2.3 默认配置

### 2.3.1 问题

* **main.js为什么是入口文件**？

脚手架依托webpack，但是并没有看到webpack.config.js配置文件，因为Vue把重要的配置文件都隐藏了，不给别人看

若想查看具体的webpack配置，执行下面命令。含义是将Vue脚手架默认的配置整理成一个output.js文件展示出来

> 只是将内容输出一下给我们看，我们如果要改里面的内容是没有用的

```sh
vue inspect > output.js
```

在1261行明显的标出整个app入口

![image-20231115170109649](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115170109649.png)



* **哪些配置尽量不要改**？

图标不要改名，因为底层就是通过这个名字去找图标的

![image-20231115171440978](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115171440978.png)



### 2.3.2 修改默认配置

> 出现在里面的配置都是可以修改的[配置参考 | Vue CLI (vuejs.org)](https://cli.vuejs.org/zh/config/)

`vue.config.js` 是一个可选的配置文件，如果项目的 (和 `package.json` 同级的) 根目录中存在这个文件，那么它会被 `@vue/cli-service` 自动加载。

> vue.config.js文件是调整和vue脚手架相关的配置的

也可以使用 `package.json` 中的 `vue` 字段，但是注意这种写法需要你严格遵照 JSON 的格式来写

![image-20231115172053573](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115172053573.png)



将下面的代码复制到vue.config.js文件中

![image-20231115173329882](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115173329882.png)

下面不是ES6的暴露，是commonjs的暴露

因为Vue最终会把vue.config.js输送给webpack，webpack是基于node.js的，node.js中所采用的模块化就是commonjs的暴露

**我们所写完的vue.config.js都会被拎出来和webpack已经写好的配置进行合并**

![image-20231115173413214](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115173413214.png)

```js
module.exports = {
  pages: {
    index: {
      // page 的入口
      entry: 'src/index/main.js',
      // 模板来源
      template: 'public/index.html',
      // 在 dist/index.html 的输出
      filename: 'index.html',
      // 当使用 title 选项时，
      // template 中的 title 标签需要是 <title><%= htmlWebpackPlugin.options.title %></title>
      title: 'Index Page',
      // 在这个页面中包含的块，默认情况下会包含
      // 提取出来的通用 chunk 和 vendor chunk。
      chunks: ['chunk-vendors', 'chunk-common', 'index']
    },
    // 当使用只有入口的字符串格式时，
    // 模板会被推导为 `public/subpage.html`
    // 并且如果找不到的话，就回退到 `public/index.html`。
    // 输出文件名会被推导为 `subpage.html`。
    subpage: 'src/subpage/main.js'
  }
}
```





## 2.4 关闭语法检查

他很烦人，所以关掉

![image-20231115174257211](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115174257211.png)

**webpack中语法检查有eslint、jslint、jshint**

**关闭烦人的语法检查**

```javascript
  /*关闭语法检查*/
  lintOnSave: false
```

![image-20231115174421640](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231115174421640.png)