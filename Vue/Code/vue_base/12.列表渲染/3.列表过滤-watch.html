<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title> 初识vue</title>
        <!--引入vue    引入之后，全局就多了一个vue这个构造函数-->
        <script type="text/javascript" src="../js/vue.js"></script> 
    </head>
    <body>
        <div id="root">
            <ul>
                <h2>人员列表</h2>
                <!-- 双向绑定一下 -->
                <input type="text" placeholder="请输入名字"  v-model="keyWords">
                <li v-for="(p,index) in  filPersons" :key="p.id" >
                    {{p.name}}-{{p.age}}-{{p.sex}}
                </li>
            </ul>
 
        </div>
 
        <script type="text/javascript">
            //阻止vue在启动时生成生产提示
            Vue.config.productionTip=false
            
            new Vue({
                el:'#root',
                data:{
                
                  keyWords:'',
                  persons:[
                    {id:'001',name:'马冬梅',age:19,sex:'女'},
                    {id:'002',name:'周冬雨',age:20,sex:'女'},
                    {id:'003',name:'周杰伦',age:21,sex:'男'},
                    {id:'004',name:'温兆伦',age:22,sex:'男'}
                  ],
                  filPersons:[]
                },
                watch:{
                    // 监视谁我们就写谁
                   keyWords:{
                    // 初始化时让handler调用一下，如果不调用的话，初始页面会没有内容
                    // 前提条件：所有的字符串.indexOf("")空字符串，返回值都是0
                     immediate:true,
                     handler(newValue,oldValue){
                        // 过滤
                        // filter规律之后，并不会影响我们初始的数组，而是生成一个全新的数组
                        //  我们不能更改直接赋值到原数组，否则会导致我们查询的内容越来越少，最后甚至没有了
                        this. filPersons= this.persons.filter((p)=>{
                            // 函数体
                            // return 后面加的语句使我们要的数据
                            // indexOf 方法，当含有括号内的字符串的时候，会返回下标是第几位（从零开始算
                            //              当不包含的时候，就会返回-1
                            return p.name.indexOf(newValue) !==-1
                        })
                     }
                   }
                },
                methods:{
 
                }
            })
 
        </script>   
    </body>
</html>