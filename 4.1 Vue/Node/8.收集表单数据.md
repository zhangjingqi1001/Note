[TOC]

# 一、收集表单数据

**v-model指令在配合不同的input框的时候有不同的技巧**

## 1.1 代码说明

**表单**

表单中的action属性是用来编写表单提交的地址，但是我们这个地方是演示收集表单数据，所以不用提交

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title> 初识vue</title>
        <!--引入vue    引入之后，全局就多了一个vue这个构造函数-->
        <script type="text/javascript" src="../js/vue.js"></script> 
    </head>
 
    <body>
        <!-- 提前说明 v-model是手机value值 -->
         <div id="root">
 
            <!-- 只要表单提交，我们就调用demo方法 -->
            <!-- 表单提交后会跳转，我们不让他跳转，加了prevent关键字 -->
            <form @submit.prevent="demo">
                <!-- for="demo"  就是为id为demo的服务 -->
                <!-- 这个label的目的，就是将“账号”和下面那个input框联系在一起，当我们点击“账号”时，我们的input框也能获取到焦点 -->
                <label for="demo">账号：</label>
                <!--v-model.trim去掉前后的空格  -->
                <input type="text" id="demo" v-model.trim="userInfo.account">
                <br/><br/>
                密码：<input type="password" v-model="userInfo.password">
                <br/><br/>
                <!-- type="number"控制用户输入的不能是字母子类的 -->
                <!-- v-model.number 控制传入到Vue中的是数字，而不是字符串 -->
                年龄：<input type="number" v-model.number="userInfo.age">
                <br/><br/>
 
                <!-- name="sex" 表示下面是一组的二者只能是选择其中一个，radio是单选框 -->
                <!-- value="male" 一定要写value，否则v-model收集不到，因为v-model默认手机input框的value值-->
                性别：
                男<input type="radio" name="sex" value="male"  v-model="userInfo.sex"  >
                女<input type="radio" name="sex" value="female"  v-model="userInfo.sex">
                <br/><br/>
 
                <!-- 多选框：v-model、value值不能少  其中hobby一定要是数组的方式，不能是字符串的形式 -->
                爱好：
                学习<input type="checkbox"    v-model="userInfo.hobby"  value="study">
                打游戏<input type="checkbox"  v-model="userInfo.hobby"  value="game">
                吃饭<input type="checkbox"    v-model="userInfo.hobby"  value="eat">
                <br/><br/>
 
                所属校区
                <select v-model="userInfo.city">
                    <!-- selected="selected"默认选择 -->
                    <option value="" selected="selected">请选择校区</option>
                    <option value="beijing" >北京</option>
                    <option value="shanghai">上海</option>
                    <option value="shenzhen">深圳</option>
                    <option value="wuhan">武汉</option>
                </select>
 
                <br/><br/>
 
                <!-- 这个地方也要双向绑定 -->
                其他信息：
                <!-- v-model.lazy不会实时收集我们在框内打的每一个字，当这个框失去焦点后才会收集框内的信息 -->
                <textarea v-model.lazy="userInfo.other"></textarea>
 
                <br/><br/>
 
                <!--这个地方的checkbox已经和刚刚的不一样，我们只需要tree或者false即可  -->
                <input type="checkbox" v-model="userInfo.agree"> 阅读并接受<a href="https://www.baidu.com">《用户协议》</a>
                <br/><br/>

                <button > 提交</button>
 
            </form>
         </div>
        
</body>
         <script type="text/javascript">
            Vue.config.productionTip=false
            
            new Vue({
                el:'#root',
                data:{
                    userInfo:{
                     account:'',
                     password:'',
                     // 性别默认女
                     sex:'female',
                    // 这个地方的hobby不可以这个样子，否则收到的就是true或者false 而不是value
                     // hobby:''
                     hobby:[],
                     city:'',
                     other:'',
                     agree:'',
                     age:''
                    }
 
                },
                methods: {
                    demo(){
                        console.log(JSON.stringify(this.userInfo))
                    }
                },
            })   
         </script>   
</html>
```





## 1.2 界面

**表单页面**

![image-20231111153248857](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111153248857.png)

**输入一些数据测试一下**

![image-20231111173630825](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111173630825.png)



## 1.3 总结

**收集表单数据**：

*  **若\<input type="text"/\>,则v-model收集的是value的值，用户输入的就是value**

```html
<label for="demo">账号：</label>
<input type="text" id="demo" v-model.trim="userInfo.account">
<br/><br/>
密码：<input type="password" v-model="userInfo.password">
```

*  **若\<input type="radio"/\>,则v-model收集的是value的值，且要给标签配置value**

```html
爱好：
学习<input type="checkbox"    v-model="userInfo.hobby"  value="study">
打游戏<input type="checkbox"  v-model="userInfo.hobby"  value="game">
吃饭<input type="checkbox"    v-model="userInfo.hobby"  value="eat">
```

*  **若\<input type="checkbox"/\>**
  * 没有配置input的value属性，那么收集的就是checked（勾选true or 未勾选false）
  * v-model的初始值是数组，那么收集的就是value组成的数组



**备注：v-model的三个修饰符**

* **lazy**

  失去焦点再收集数据

* **number**

  输入字符串转为有效数字

* **trim**：

  输入首尾空格过滤



# 二、过滤器

Vue提供的新的处理数据的方式

不用过滤器，使用计算属性或者是methods方法也能完成



## 2.1 计算属性格式化时间

> 引用一下第三方的库[BootCDN - Bootstrap 中文网开源项目免费 CDN 加速服务](https://www.bootcdn.cn/)
>
> ![image-20231111211957567](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111211957567.png)
>
> 或者直接点击“复制连接”
>
> ![image-20231111212114174](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111212114174.png)
>
> 将复制的路径用浏览器打开，之后将内容复制到js文件里面，在我们vue项目引入即可
>
> ![image-20231111212140166](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111212140166.png)

```html
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title> 初识vue</title>
    <!--引入vue    引入之后，全局就多了一个vue这个构造函数-->
    <script type="text/javascript" src="../js/vue.js"></script>
    <!-- <script type="text/javascript" src="../js/dayjs.min.js"></script> -->
    <script src="https://cdn.bootcdn.net/ajax/libs/dayjs/1.11.9/dayjs.min.js"></script>
</head>

<body>
    <div id="root">
        <h2>显示格式化后的时间</h2>
        <h3>现在是：{{fmtTime}}</h3>
    </div>

    <script type="text/javascript">
        //阻止vue在启动时生成生产提示
        Vue.config.productionTip = false

        new Vue({
            el: '#root',
            data: {
                time: 1621561377603
            },
            computed: {
                fmtTime() {
                    return dayjs(this.time).format('YYYY-MM-DD HH:mm:ss')
                }
            }
        })

    </script>
</body>

</html>
```



![](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111212913278.png)



## 2.2 函数格式化时间

```html
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title> 初识vue</title>
    <!--引入vue    引入之后，全局就多了一个vue这个构造函数-->
    <script type="text/javascript" src="../js/vue.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/dayjs/1.11.9/dayjs.min.js"></script>
</head>

<body>
    <div id="root">
        <h2>显示格式化后的时间</h2>

        <!-- methods实现 -->
        <h3>现在是:{{getFmtTime()}}</h3>
    </div>

    <script type="text/javascript">
        //阻止vue在启动时生成生产提示
        Vue.config.productionTip = false

        new Vue({
            el: '#root',
            data: {
                time: 1621561377603
            },

            methods: {
                getFmtTime() {
                    return dayjs(this.time).format('YYYY-MM-DD HH:mm:ss')
                }
            },
        })

    </script>
</body>

</html>
```

![image-20231111212913278](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20231111212913278.png)



## 2.3 过滤器格式化时间

**过滤器两种语法**

* **与v-bind使用**

  用一个动态的标签属性x

  ```html
  <h3 :x="msg | mySlice">{{time | timeFormater}}</h3>
  ```

  读取属性msg的前4位

* **与插值语法使用**

  ```html
  <h3>{{time | timeFormater}}</h3>
  ```



**注意！过滤器并没有改变原本的数据，是产生新的对应的数据**

### 2.3.1 普通过滤器

我们首先写正常要展示的数据time

```html
<!-- 过滤器的实现 -->
<!-- time作为参数传给  timeFormater  之后 timeFormater的返回值代替整个插值语句-->
<!--timeFormater是定义的过滤器的名字-->
<h3>现在是：{{time | timeFormater }}</h3>
 
<!-- 虽然我们在括号里只有一个参数，但是实际上是传了两个参数，第一个参数永远是time -->
<h3>现在是：{{time | timeFormater('YYYY-MM-DD HH:mm:ss')}}</h3>
```

**定义过滤器，过滤器的本质就是一个函数，可以将数据进行进一步的加工**

```javascript
filters:{
   // 当str为空的时候，我们可以给str赋值YYYY-MM-DD HH:mm:ss
   // 当str有值的时候，直接使用传过来的值
   timeFormater(value,str='YYYY-MM-DD HH:mm:ss'){
       return dayjs(value).format(str)
   }
}
```

### 2.3.2 过滤器串联

```html
 <!-- time传给timeFormater('YYYY-MM-DD HH:mm:ss')  工作完成之后再传给 mySlice -->
<h3>现在是：{{time | timeFormater('YYYY-MM-DD HH:mm:ss') |mySlice}}</h3>
```

**定义过滤器**

```java
filters:{
    // 当str为空的时候，我们可以给str赋值YYYY-MM-DD HH:mm:ss
    // 当str有值的时候，直接使用传过来的值
    timeFormater(value,str='YYYY-MM-DD HH:mm:ss'){
        return dayjs(value).format('YYYY-MM-DD HH:mm:ss')
    },
    mySlice(value){
         // 截取前四位
         return value.slice(0,4)
    }
}
```

**工作流程**

![img](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/b53d50205b2344b98b35d8ecfe08952a.png)

### 2.3.3 全局过滤器

**之前所写的过滤器都是局部过滤器，只有vue实例可以使用，如果再出现第二个vue实例就不能使用了**

> 比如说在A组件定义的过滤器，在B组件中就使用不了

**所以我们需要一个全局过滤器，并且过滤器的创建要在new vue之前**

```javascript
<script type="text/javascript">
    //过滤器的名字：mySlice
    //参数二：对应的函数
    Vue.filter('mySlice',function(value){
                  //截取字符串
                  return value.slice(0,4)
                }
               )
     new Vue({
            el: '#root',
            data: {
                time: 1621561377603
            },
         )
 </script>
```